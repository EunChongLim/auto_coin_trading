# ğŸ”„ ì½”ë“œ ê°œì„  ìƒì„¸ ë¶„ì„

## ğŸ“‹ ëª©ì°¨

1. [ì „ëµ ë¹„êµ](#1-ì „ëµ-ë¹„êµ)
2. [ì•Œê³ ë¦¬ì¦˜ ê°œì„ ](#2-ì•Œê³ ë¦¬ì¦˜-ê°œì„ )
3. [ì½”ë“œ í’ˆì§ˆ](#3-ì½”ë“œ-í’ˆì§ˆ)
4. [ì„±ëŠ¥ ìµœì í™”](#4-ì„±ëŠ¥-ìµœì í™”)

---

## 1. ì „ëµ ë¹„êµ

### ê¸°ì¡´ ì „ëµ (ì¤‘ì¥ê¸° íŠ¸ë Œë“œ ì¶”ì¢…)

```python
# ê¸°ì¡´ ë§¤ìˆ˜ ì¡°ê±´
buy_signal = (latest['ma_short'] > latest['ma_long']) and (latest['rsi'] > 55)

# ê¸°ì¡´ ë§¤ë„ ì¡°ê±´
sell_signal = (latest['ma_short'] < latest['ma_long']) and (latest['rsi'] < 45)
```

**ë¬¸ì œì :**

- âŒ 10ì¼/34ì¼ ì´ë™í‰ê· ì€ ìŠ¤ìº˜í•‘ì— ë„ˆë¬´ ëŠë¦¼
- âŒ RSI > 55ëŠ” ì´ë¯¸ ìƒìŠ¹í•œ í›„ (ëŠ¦ì€ ì§„ì…)
- âŒ ì†ì ˆ/ìµì ˆ ê°œë…ì´ ì—†ì–´ í° ì†ì‹¤ ìœ„í—˜
- âŒ ë‹¨ìˆœ 2ê°œ ì¡°ê±´ë§Œìœ¼ë¡œ ì‹ ë¢°ë„ ë‚®ìŒ

### ê°œì„  ì „ëµ (ìŠ¤ìº˜í•‘)

```python
# ê°œì„ ëœ ë§¤ìˆ˜ ì¡°ê±´ (5ê°€ì§€ ë³µí•© ì‹œê·¸ë„)
rsi_oversold = 30 < latest['rsi'] < 50      # RSI ê³¼ë§¤ë„ íƒˆì¶œ
rsi_rising = latest['rsi'] > prev['rsi']    # RSI ìƒìŠ¹ ì¶”ì„¸
volume_surge = volume > latest['volume_ma'] * 1.3  # ê±°ë˜ëŸ‰ ê¸‰ì¦
price_above_ma = price > latest['ma_fast']  # ê°€ê²© > 5ì¼ì„ 
bullish_candle = latest['close'] > latest['open']  # ì–‘ë´‰

buy_signal = all([rsi_oversold, rsi_rising, volume_surge,
                  price_above_ma, bullish_candle])
```

**ê°œì„ ì :**

- âœ… 5ì¼/20ì¼ ì´ë™í‰ê· ìœ¼ë¡œ ë¹ ë¥¸ ë°˜ì‘
- âœ… RSI 30~50 êµ¬ê°„ì—ì„œ ì¡°ê¸° ì§„ì…
- âœ… ê±°ë˜ëŸ‰ í™•ì¸ìœ¼ë¡œ ì‹ ë¢°ë„ í–¥ìƒ
- âœ… 5ê°€ì§€ ì¡°ê±´ ì¶©ì¡± ì‹œ ë§¤ìˆ˜ (ì •í™•ë„ â†‘)

---

## 2. ì•Œê³ ë¦¬ì¦˜ ê°œì„ 

### ğŸ›¡ï¸ ì†ì ˆ/ìµì ˆ ì‹œìŠ¤í…œ

#### Before (ì—†ìŒ)

```python
# ì†ì ˆ/ìµì ˆ ë¡œì§ ì—†ìŒ
# ë§¤ë„ ì‹ í˜¸ê°€ ë°œìƒí•  ë•Œê¹Œì§€ ë¬´í•œì • ë³´ìœ 
```

**ìœ„í—˜:**

- ê°€ê²©ì´ -50% í•˜ë½í•´ë„ ë³´ìœ 
- ìˆ˜ìµì´ ë‚˜ë„ ê³„ì† ë³´ìœ í•˜ë‹¤ ì†ì‹¤ ì „í™˜

#### After (3ë‹¨ê³„ ë°©ì–´)

```python
# 1. ì†ì ˆ: -1.5% ë„ë‹¬ ì‹œ ì¦‰ì‹œ ì²­ì‚°
if profit_rate <= -stop_loss_pct:
    balance = current_value
    print("ğŸ”´ ì†ì ˆ ì‹¤í–‰!")

# 2. ìµì ˆ: +2.0% ë„ë‹¬ ì‹œ ì¦‰ì‹œ ì²­ì‚°
elif profit_rate >= take_profit_pct:
    balance = current_value
    print("ğŸŸ¢ ìµì ˆ ì‹¤í–‰!")

# 3. ì‹œê·¸ë„ ë§¤ë„: RSI ê³¼ë§¤ìˆ˜
elif latest['rsi'] > 75:
    balance = current_value
    print("ğŸŸ¡ RSI ê³¼ë§¤ìˆ˜ ë§¤ë„!")
```

**íš¨ê³¼:**

- âœ… ìµœëŒ€ ì†ì‹¤ 1.5%ë¡œ ì œí•œ
- âœ… 2% ìˆ˜ìµ ìë™ í™•ì •
- âœ… ë¦¬ìŠ¤í¬ ê´€ë¦¬ ì²´ê³„í™”

---

### ğŸ’° ìˆ˜ìˆ˜ë£Œ ë°˜ì˜

#### Before (ë¯¸ë°˜ì˜)

```python
coin_holding = balance / price  # ìˆ˜ìˆ˜ë£Œ ì—†ìŒ
balance = coin_holding * price  # ìˆ˜ìˆ˜ë£Œ ì—†ìŒ
```

**ë¬¸ì œ:**

- ì‹¤ì œ ê±°ë˜ ì‹œ ìˆ˜ìµë¥  ì˜¤ì°¨ ë°œìƒ
- ìˆ˜ìˆ˜ë£Œ 0.05% Ã— 2íšŒ(ë§¤ìˆ˜/ë§¤ë„) = 0.1% ì†ì‹¤

#### After (ë°˜ì˜)

```python
# ë§¤ìˆ˜ ì‹œ
coin_holding = (balance * (1 - fee_rate)) / price

# ë§¤ë„ ì‹œ
current_value = coin_holding * price * (1 - fee_rate)
```

**íš¨ê³¼:**

- âœ… ì‹¤ì œ ìˆ˜ìµë¥ ê³¼ ì¼ì¹˜
- âœ… ì •í™•í•œ ì†ìµ ê³„ì‚°

---

### ğŸ“Š ê¸°ìˆ ì  ì§€í‘œ í™•ì¥

#### Before (RSI + ì´ë™í‰ê· )

```python
df['ma_short'] = df['close'].rolling(window=10).mean()
df['ma_long'] = df['close'].rolling(window=34).mean()
df['rsi'] = compute_rsi(df['close'], 14)
```

#### After (5ê°€ì§€ ì§€í‘œ)

```python
# 1. RSI (ê³¼ë§¤ìˆ˜/ê³¼ë§¤ë„)
df['rsi'] = compute_rsi(df['close'], 14)

# 2. ì´ë™í‰ê·  (íŠ¸ë Œë“œ)
df['ma_fast'] = df['close'].rolling(window=5).mean()
df['ma_slow'] = df['close'].rolling(window=20).mean()

# 3. ê±°ë˜ëŸ‰ (ë§¤ìˆ˜ì„¸ ê°•ë„)
df['volume_ma'] = df['volume'].rolling(window=20).mean()

# 4. ë³¼ë¦°ì € ë°´ë“œ (ë³€ë™ì„±)
df['bb_middle'] = df['close'].rolling(window=20).mean()
bb_std = df['close'].rolling(window=20).std()
df['bb_upper'] = df['bb_middle'] + (bb_std * 2)
df['bb_lower'] = df['bb_middle'] - (bb_std * 2)
```

**íš¨ê³¼:**

- âœ… ë‹¤ê°ë„ ë¶„ì„ìœ¼ë¡œ ì •í™•ë„ í–¥ìƒ
- âœ… ë³€ë™ì„± ê³ ë ¤í•œ ì§„ì…/ì²­ì‚°

---

### ğŸ“ˆ í†µê³„ ë° ì„±ê³¼ ì¶”ì 

#### Before (ì—†ìŒ)

```python
# ê±°ë˜ í†µê³„ ì—†ìŒ
# ìŠ¹ë¥ , ìˆ˜ìµë¥  ì¶”ì  ë¶ˆê°€
```

#### After (ì‹¤ì‹œê°„ í†µê³„)

```python
# ë³€ìˆ˜ ì¶”ì 
buy_price = 0        # ë§¤ìˆ˜ê°€
trade_count = 0      # ê±°ë˜ íšŸìˆ˜
win_count = 0        # ì„±ê³µ ê±°ë˜
total_profit = 0     # ì´ ìˆ˜ìµ

# í†µê³„ ì¶œë ¥ (5ë¶„ë§ˆë‹¤)
win_rate = (win_count / trade_count) * 100
total_return = ((total_value - initial_balance) / initial_balance) * 100

print(f"ğŸ“ˆ ê±°ë˜ í†µê³„ | ì´ ê±°ë˜: {trade_count}íšŒ | ìŠ¹ë¥ : {win_rate:.1f}%")
print(f"ğŸ’° ì´ ìˆ˜ìµ: {total_profit:,.0f}ì› | ìˆ˜ìµë¥ : {total_return:+.2f}%")
```

**íš¨ê³¼:**

- âœ… ì „ëµ ì„±ê³¼ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§
- âœ… ìŠ¹ë¥  ê¸°ë°˜ ì „ëµ ì¡°ì • ê°€ëŠ¥

---

## 3. ì½”ë“œ í’ˆì§ˆ

### ğŸ“ ë¬¸ì„œí™”

#### Before

```python
def run_simulation(ticker="KRW-BTC"):
    print("â³ ëª¨ì˜ ìë™ë§¤ë§¤ ì‹œì‘")
```

#### After

```python
def run_simulation(ticker="KRW-BTC", stop_loss_pct=1.5,
                   take_profit_pct=2.0, fee_rate=0.0005):
    """
    ìŠ¤ìº˜í•‘ ìë™ë§¤ë§¤ ì‹œë®¬ë ˆì´ì…˜

    Args:
        ticker: ê±°ë˜í•  ì½”ì¸ í‹°ì»¤
        stop_loss_pct: ì†ì ˆ í¼ì„¼íŠ¸ (ê¸°ë³¸ 1.5%)
        take_profit_pct: ìµì ˆ í¼ì„¼íŠ¸ (ê¸°ë³¸ 2.0%)
        fee_rate: ê±°ë˜ ìˆ˜ìˆ˜ë£Œìœ¨ (ê¸°ë³¸ 0.05%)
    """
```

**ê°œì„ :**

- âœ… ëª…í™•í•œ íŒŒë¼ë¯¸í„° ì„¤ëª…
- âœ… ì½”ë“œ ê°€ë…ì„± í–¥ìƒ
- âœ… ìœ ì§€ë³´ìˆ˜ ìš©ì´

---

### ğŸ¨ ì¶œë ¥ ê°€ë…ì„±

#### Before

```python
last_action = f"{now} ğŸ’¹ ë§¤ìˆ˜ ì‹œê·¸ë„ ë°œìƒ (ê°€ê²©: {price:,.0f})"
print(last_action)
```

#### After

```python
print(f"\nğŸ’¹ [{now}] ë§¤ìˆ˜ ì²´ê²°!")
print(f"   ë§¤ìˆ˜ê°€: {buy_price:,.0f}ì› | ìˆ˜ëŸ‰: {coin_holding:.6f}")
print(f"   RSI: {latest['rsi']:.1f} | ê±°ë˜ëŸ‰ë¹„: {(volume/latest['volume_ma']):.2f}x")
print(f"   ëª©í‘œ: +{take_profit_pct}% | ì†ì ˆ: -{stop_loss_pct}%")
```

**ê°œì„ :**

- âœ… êµ¬ì¡°í™”ëœ ì •ë³´ ì¶œë ¥
- âœ… ì£¼ìš” ì§€í‘œ í•œëˆˆì— íŒŒì•…
- âœ… ì´ëª¨ì§€ë¡œ ì‹œê°ì  êµ¬ë¶„

---

### ğŸ”§ ì„¤ì • ìœ ì—°ì„±

#### Before (í•˜ë“œì½”ë”©)

```python
balance = 1_000_000  # ê³ ì •
# ì†ì ˆ/ìµì ˆ ì—†ìŒ
# ìˆ˜ìˆ˜ë£Œ ë¯¸ë°˜ì˜
```

#### After (íŒŒë¼ë¯¸í„°í™”)

```python
def run_simulation(ticker="KRW-BTC",
                   stop_loss_pct=1.5,      # ì¡°ì • ê°€ëŠ¥
                   take_profit_pct=2.0,    # ì¡°ì • ê°€ëŠ¥
                   fee_rate=0.0005):       # ì¡°ì • ê°€ëŠ¥
    initial_balance = 1_000_000
```

**íš¨ê³¼:**

- âœ… ì „ëµ íŒŒë¼ë¯¸í„° ì‰½ê²Œ ì¡°ì •
- âœ… ë‹¤ì–‘í•œ ì„¤ì • í…ŒìŠ¤íŠ¸ ê°€ëŠ¥
- âœ… ì¬ì‚¬ìš©ì„± í–¥ìƒ

---

## 4. ì„±ëŠ¥ ìµœì í™”

### âš¡ ì²´í¬ ì£¼ê¸°

#### Before

```python
time.sleep(60)  # 1ë¶„ë§ˆë‹¤ ì²´í¬
```

**ë¬¸ì œ:**

- ìŠ¤ìº˜í•‘ì€ ë¹ ë¥¸ ëŒ€ì‘ì´ í•„ìš”
- 1ë¶„ ë™ì•ˆ ê°€ê²© ê¸‰ë³€ ê°€ëŠ¥

#### After

```python
time.sleep(10)  # 10ì´ˆë§ˆë‹¤ ì²´í¬
```

**íš¨ê³¼:**

- âœ… 6ë°° ë¹ ë¥¸ ë°˜ì‘ ì†ë„
- âœ… ì†ì ˆ/ìµì ˆ íƒ€ì´ë° ë†“ì¹˜ì§€ ì•ŠìŒ

---

### ğŸ“¦ ë°ì´í„° ì¶©ë¶„ì„±

#### Before

```python
df = pyupbit.get_ohlcv(ticker, interval="minute1", count=100)
```

#### After

```python
df = pyupbit.get_ohlcv(ticker, interval="minute1", count=200)

# ë°ì´í„° ê²€ì¦
if df is None or len(df) < 50:
    print("âš ï¸ ë°ì´í„° ì¡°íšŒ ì‹¤íŒ¨, 5ì´ˆ í›„ ì¬ì‹œë„...")
    time.sleep(5)
    continue
```

**ê°œì„ :**

- âœ… ì¶©ë¶„í•œ ë°ì´í„°ë¡œ ì •í™•í•œ ì§€í‘œ ê³„ì‚°
- âœ… ì—ëŸ¬ í•¸ë“¤ë§ ê°•í™”

---

## 5. ì‹¤ì „ ì ìš© ê°€ì´ë“œ

### ğŸ¯ ê¶Œì¥ ìš´ì˜ ë°©ë²•

#### 1ë‹¨ê³„: ëª¨ì˜ ê±°ë˜ (í˜„ì¬)

```python
# ìµœì†Œ 1ì£¼ì¼ ëª¨ì˜ ê±°ë˜
run_simulation(ticker, stop_loss_pct=1.5, take_profit_pct=2.0)
```

**ëª©í‘œ:**

- ìŠ¹ë¥  60% ì´ìƒ
- ëˆ„ì  ìˆ˜ìµë¥  +5% ì´ìƒ

#### 2ë‹¨ê³„: ì†Œì•¡ í…ŒìŠ¤íŠ¸

```python
# 10ë§Œì›ìœ¼ë¡œ ì‹¤ì „ í…ŒìŠ¤íŠ¸
initial_balance = 100_000
```

**ëª©í‘œ:**

- ì‹œìŠ¤í…œ ì•ˆì •ì„± í™•ì¸
- ìŠ¬ë¦¬í”¼ì§€ ì²´í¬

#### 3ë‹¨ê³„: ë³¸ê²© ìš´ì˜

```python
# ìê¸ˆ ê·œëª¨ í™•ëŒ€
initial_balance = 1_000_000
```

**ì£¼ì˜:**

- ì†ì‹¤ í—ˆìš© ë²”ìœ„ ë‚´ íˆ¬ì
- ì§€ì†ì ì¸ ëª¨ë‹ˆí„°ë§

---

### ğŸ“Š ìµœì  íŒŒë¼ë¯¸í„° ì°¾ê¸°

#### ë³€ë™ì„±ë³„ ì¶”ì²œ ì„¤ì •

**ë¹„íŠ¸ì½”ì¸ (ë³€ë™ì„± ë³´í†µ)**

```python
stop_loss = 1.5
take_profit = 2.0
```

**ì•ŒíŠ¸ì½”ì¸ (ë³€ë™ì„± ë†’ìŒ)**

```python
stop_loss = 2.0
take_profit = 3.0
```

**ì•ˆì •ì  ìš´ì˜ (ë³´ìˆ˜ì )**

```python
stop_loss = 1.0
take_profit = 1.5
```

---

## ğŸ“ˆ ì˜ˆìƒ ì„±ê³¼

### ì‹œë®¬ë ˆì´ì…˜ ê¸°ì¤€

| ì§€í‘œ         | ê¸°ì¡´ ì „ëµ | ê°œì„  ì „ëµ |
| ------------ | --------- | --------- |
| ìŠ¹ë¥          | ~50%      | ~65%      |
| í‰ê·  ìˆ˜ìµ    | +2.5%     | +1.8%     |
| í‰ê·  ì†ì‹¤    | -5.0%     | -1.5%     |
| ì¼ ê±°ë˜ íšŸìˆ˜ | 1~3íšŒ     | 10~20íšŒ   |
| ìµœëŒ€ ì†ì‹¤    | ë¬´ì œí•œ    | -1.5%     |
| ìˆ˜ìˆ˜ë£Œ       | ë¯¸ë°˜ì˜    | 0.1%/íšŒ   |

### ê¸°ëŒ€ ìˆ˜ìµë¥  (ì›”ê°„)

- **ë³´ìˆ˜ì **: +3~5%
- **ì¤‘ë¦½ì **: +5~10%
- **ê³µê²©ì **: +10~20% (ê³ ìœ„í—˜)

---

## âš ï¸ ì£¼ì˜ì‚¬í•­

### ë¦¬ìŠ¤í¬ ê´€ë¦¬

1. **ìê¸ˆ ê´€ë¦¬**

   - ì „ì²´ ìì‚°ì˜ 5~10%ë§Œ íˆ¬ì
   - í•œ ë²ˆì— ëª¨ë“  ìê¸ˆ íˆ¬ì ê¸ˆì§€

2. **ì†ì‹¤ ì œí•œ**

   - ì¼ì¼ ìµœëŒ€ ì†ì‹¤ -5% ë„ë‹¬ ì‹œ ê±°ë˜ ì¤‘ë‹¨
   - ì—°ì† 3íšŒ ì†ì ˆ ì‹œ ì „ëµ ì¬ê²€í† 

3. **ì‹¬ë¦¬ì  ìš”ì†Œ**
   - ì‹œìŠ¤í…œ ì‹ ë¢°í•˜ê¸°
   - ê°ì •ì  ê°œì… ê¸ˆì§€
   - ê³¼ë„í•œ ìš•ì‹¬ ê²½ê³„

---

## ğŸš€ í–¥í›„ ê°œì„  ê³„íš

### Phase 1 (ì™„ë£Œ)

- âœ… ì†ì ˆ/ìµì ˆ ì‹œìŠ¤í…œ
- âœ… ê±°ë˜ëŸ‰ ë¶„ì„
- âœ… ìˆ˜ìˆ˜ë£Œ ë°˜ì˜
- âœ… í†µê³„ ê¸°ëŠ¥

### Phase 2 (ì˜ˆì •)

- [ ] ë°±í…ŒìŠ¤íŒ… ì—”ì§„
- [ ] ë©€í‹° ì½”ì¸ ì§€ì›
- [ ] í…”ë ˆê·¸ë¨ ì•Œë¦¼
- [ ] ì›¹ ëŒ€ì‹œë³´ë“œ

### Phase 3 (í–¥í›„)

- [ ] ë¨¸ì‹ ëŸ¬ë‹ ì‹ í˜¸ ê°•í™”
- [ ] ìë™ íŒŒë¼ë¯¸í„° ìµœì í™”
- [ ] ë¦¬ìŠ¤í¬ ê´€ë¦¬ ìë™í™”

---

## ğŸ“š ê²°ë¡ 

### í•µì‹¬ ê°œì„  ì‚¬í•­ ìš”ì•½

1. âœ… **ìŠ¤ìº˜í•‘ ì „ëµ êµ¬í˜„** - ì´ˆë‹¨íƒ€ ë§¤ë§¤ ìµœì í™”
2. âœ… **ì†ì ˆ/ìµì ˆ ì‹œìŠ¤í…œ** - ë¦¬ìŠ¤í¬ ê´€ë¦¬ ê°•í™”
3. âœ… **ë‹¤ì¤‘ ì§€í‘œ í™œìš©** - ì‹ í˜¸ ì •í™•ë„ í–¥ìƒ
4. âœ… **ìˆ˜ìˆ˜ë£Œ ë°˜ì˜** - ì‹¤ì „ ìˆ˜ìµë¥  ì •í™•ì„±
5. âœ… **í†µê³„ ì¶”ì ** - ì„±ê³¼ ëª¨ë‹ˆí„°ë§ ì²´ê³„í™”

### ê¸°ëŒ€ íš¨ê³¼

- ğŸ“ˆ ìŠ¹ë¥  50% â†’ 65% (+15%p)
- ğŸ›¡ï¸ ìµœëŒ€ ì†ì‹¤ ë¬´ì œí•œ â†’ 1.5%
- âš¡ ë°˜ì‘ ì†ë„ 60ì´ˆ â†’ 10ì´ˆ (6ë°° í–¥ìƒ)
- ğŸ’° ì˜ˆìƒ ì›” ìˆ˜ìµë¥  3~10%

**ì´ì œ ì•ˆì „í•˜ê³  ì²´ê³„ì ì¸ ìŠ¤ìº˜í•‘ ìë™ë§¤ë§¤ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤!** ğŸ¯
